function y(){}function pt(t){return t()}function Ct(){return Object.create(null)}function T(t){t.forEach(pt)}function I(t){return typeof t=="function"}function j(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function At(t){return Object.keys(t).length===0}function ht(t,...e){if(t==null)return y;let n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function k(t){let e;return ht(t,n=>e=n)(),e}function O(t,e,n){t.$$.on_destroy.push(ht(e,n))}function Dt(t){return t&&I(t.destroy)?t.destroy:y}var jt=!1;function Kt(){jt=!0}function Qt(){jt=!1}function _(t,e){t.appendChild(e)}function v(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode&&t.parentNode.removeChild(t)}function rt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function N(){return S(" ")}function ft(){return S("")}function G(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function st(t){return t===""?null:+t}function Zt(t){return Array.from(t.childNodes)}function lt(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ct(t,e){t.value=e??""}function B(t,e,n,i){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function mt(t,e){for(let n=0;n<t.options.length;n+=1){let i=t.options[n];if(i.__value===e){i.selected=!0;return}}t.selectedIndex=-1}function Nt(t){let e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function q(t,e,n){t.classList[n?"add":"remove"](e)}var gt;function it(t){gt=t}var Z=[];var Ot=[],ut=[],Mt=[],te=Promise.resolve(),_t=!1;function ee(){_t||(_t=!0,te.then(qt))}function ot(t){ut.push(t)}var dt=new Set,Q=0;function qt(){if(Q!==0)return;let t=gt;do{try{for(;Q<Z.length;){let e=Z[Q];Q++,it(e),ne(e.$$)}}catch(e){throw Z.length=0,Q=0,e}for(it(null),Z.length=0,Q=0;Ot.length;)Ot.pop()();for(let e=0;e<ut.length;e+=1){let n=ut[e];dt.has(n)||(dt.add(n),n())}ut.length=0}while(Z.length);for(;Mt.length;)Mt.pop()();_t=!1,dt.clear(),it(t)}function ne(t){if(t.fragment!==null){t.update(),T(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ot)}}var at=new Set,X;function yt(){X={r:0,c:[],p:X}}function bt(){X.r||T(X.c),X=X.p}function M(t,e){t&&t.i&&(at.delete(t),t.i(e))}function R(t,e,n,i){if(t&&t.o){if(at.has(t))return;at.add(t),X.c.push(()=>{at.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}var Fe=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function tt(t){t&&t.c()}function Y(t,e,n,i){let{fragment:o,after_update:u}=t.$$;o&&o.m(e,n),i||ot(()=>{let s=t.$$.on_mount.map(pt).filter(I);t.$$.on_destroy?t.$$.on_destroy.push(...s):T(s),t.$$.on_mount=[]}),u.forEach(ot)}function W(t,e){let n=t.$$;n.fragment!==null&&(T(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ie(t,e){t.$$.dirty[0]===-1&&(Z.push(t),ee(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function L(t,e,n,i,o,u,s,l=[-1]){let c=gt;it(t);let r=t.$$={fragment:null,ctx:[],props:u,update:y,not_equal:o,bound:Ct(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Ct(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};s&&s(r.root);let f=!1;if(r.ctx=n?n(t,e.props||{},(a,g,...m)=>{let E=m.length?m[0]:g;return r.ctx&&o(r.ctx[a],r.ctx[a]=E)&&(!r.skip_bound&&r.bound[a]&&r.bound[a](E),f&&ie(t,a)),g}):[],r.update(),f=!0,T(r.before_update),r.fragment=i?i(r.ctx):!1,e.target){if(e.hydrate){Kt();let a=Zt(e.target);r.fragment&&r.fragment.l(a),a.forEach(b)}else r.fragment&&r.fragment.c();e.intro&&M(t.$$.fragment),Y(t,e.target,e.anchor,e.customElement),Qt(),qt()}it(c)}var oe;typeof HTMLElement=="function"&&(oe=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(pt).filter(I);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){T(this.$$.on_disconnect)}$destroy(){W(this,1),this.$destroy=y}$on(t,e){if(!I(e))return y;let n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{let i=n.indexOf(e);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!At(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var D=class{$destroy(){W(this,1),this.$destroy=y}$on(e,n){if(!I(n))return y;let i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{let o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!At(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var et=[];function J(t,e=y){let n,i=new Set;function o(l){if(j(t,l)&&(t=l,n)){let c=!et.length;for(let r of i)r[1](),et.push(r,t);if(c){for(let r=0;r<et.length;r+=2)et[r][0](et[r+1]);et.length=0}}}function u(l){o(l(t))}function s(l,c=y){let r=[l,c];return i.add(r),i.size===1&&(n=e(o)||y),l(t),()=>{i.delete(r),i.size===0&&(n(),n=null)}}return{set:o,update:u,subscribe:s}}function Tt(t,e,n){return Math.min(Math.max(e,t),n)}function Rt(t){return{x:Math.round(Math.random()*(t.width-1)),y:Math.round(Math.random()*(t.height-1))}}function U(t,e){return t.x===e.x&&t.y===e.y}function re(){let{subscribe:t,set:e,update:n}=J([{x:0,y:0}]),i={Up:{x:0,y:-1},Down:{x:0,y:1},Left:{x:-1,y:0},Right:{x:1,y:0}};return{set:e,subscribe:t,update:n,head:{x:0,y:0},direction:{x:1,y:0},expand:!1,init(){this.head=k(this)[0],this.direction=i.Right},moveHead(){this.head={x:this.head.x+this.direction.x,y:this.head.y+this.direction.y}},moveBody(){this.unshift(this.head),this.expand?this.expand=!1:this.pop()},direct(l){this.direction=i[l]},include(l){return k(this).some(c=>U(c,l))},unshift(l){e([l,...k(this)])},pop(){e(k(this).slice(0,-1))}}}var p=re();function se(){let{subscribe:t,set:e}=J({x:0,y:0});return{subscribe:t,make(){let n;do n=A.random();while(p.include(n));e(n)},include(n){return U(k(this),n)}}}var V=se();function le(){let{subscribe:t,set:e}=J();return e({width:20,height:20,part:1.5,gap:1.5,cell:15}),{set:e,subscribe:t,random(){return Rt(k(this))}}}var A=le();function ce(){let{subscribe:t,set:e,update:n}=J();e({state:"",score:0,speed:1});function i(u){n(s=>Object.assign(s,{state:u}))}function o(u){n(s=>Object.assign(s,{score:u}))}return{subscribe:t,state:i,score:o,start(){o(0),i("play"),p.init(),V.make(),wt()},pause(){i("pause")},resume(){i("play"),wt()},stop(){i("stop"),p.set([{x:0,y:0}])},scoreup(){n(u=>Object.assign(u,{score:u.score+10*u.speed}))},speedup(){n(u=>Object.assign(u,{speed:Tt(1,u.speed+1,10)}))}}}var $=ce();function wt(){setTimeout(()=>{k($).state==="play"&&(ue(),wt())},450-40*k($).speed)}function ue(){if(p.moveHead(),p.include(p.head))return $.stop();p.head.y<0?p.head.y=k(A).height-1:p.head.y>=k(A).height?p.head.y=0:p.head.x<0?p.head.x=k(A).width-1:p.head.x>=k(A).width&&(p.head.x=0),p.moveBody(),V.include(p.head)&&(V.make(),p.expand=!0,$.scoreup(),k(p).length%5||$.speedup())}function Lt(t,e,n){let i=t.slice();return i[8]=e[n][0],i[9]=e[n][1],i}function ae(t){let e,n=t[1].state==="pause"?"Resume":"Start",i,o,u,s,l,c=t[1].state!=="pause"&&zt(t);return{c(){e=h("button"),i=S(n),o=N(),c&&c.c(),u=ft(),d(e,"class","lg")},m(r,f){v(r,e,f),_(e,i),v(r,o,f),c&&c.m(r,f),v(r,u,f),s||(l=G(e,"click",function(){I(t[1].state==="pause"?$.resume:$.start)&&(t[1].state==="pause"?$.resume:$.start).apply(this,arguments)}),s=!0)},p(r,f){t=r,f&2&&n!==(n=t[1].state==="pause"?"Resume":"Start")&&lt(i,n),t[1].state!=="pause"?c?c.p(t,f):(c=zt(t),c.c(),c.m(u.parentNode,u)):c&&(c.d(1),c=null)},d(r){r&&b(e),r&&b(o),c&&c.d(r),r&&b(u),s=!1,l()}}}function fe(t){let e,n,i,o,u;return{c(){e=h("button"),e.textContent="Pause",n=N(),i=h("button"),i.textContent="Stop"},m(s,l){v(s,e,l),v(s,n,l),v(s,i,l),o||(u=[G(e,"click",$.pause),G(i,"click",$.stop)],o=!0)},p:y,d(s){s&&b(e),s&&b(n),s&&b(i),o=!1,T(u)}}}function zt(t){let e,n,i,o,u,s,l,c,r,f,a,g,m,E,F,P,z,nt,Et,K=t[3],C=[];for(let w=0;w<K.length;w+=1)C[w]=Bt(Lt(t,K,w));return{c(){e=h("fieldset"),n=h("label"),i=S(`Speed
                    `),o=h("input"),u=N(),s=h("label"),l=S(`Snake
                    `),c=h("input"),f=N(),a=h("label"),g=S(`Cell
                    `),m=h("input"),E=N(),F=h("label"),P=S(`Field
                    `),z=h("select");for(let w=0;w<C.length;w+=1)C[w].c();d(o,"type","number"),d(o,"min","1"),d(o,"max","10"),d(o,"maxlength","2"),d(o,"size","3"),d(c,"type","number"),c.value=r=t[0].length,d(c,"min","1"),d(c,"max","10"),d(c,"maxlength","2"),d(c,"size","3"),d(m,"type","number"),d(m,"min","5"),d(m,"max","100"),d(m,"maxlength","2"),d(m,"size","3"),t[2].part===void 0&&ot(()=>t[7].call(z))},m(w,H){v(w,e,H),_(e,n),_(n,i),_(n,o),ct(o,t[1].speed),_(e,u),_(e,s),_(s,l),_(s,c),_(e,f),_(e,a),_(a,g),_(a,m),ct(m,t[2].cell),_(e,E),_(e,F),_(F,P),_(F,z);for(let x=0;x<C.length;x+=1)C[x].m(z,null);mt(z,t[2].part),nt||(Et=[G(o,"input",t[5]),G(c,"input",t[4]),G(m,"input",t[6]),G(z,"change",t[7])],nt=!0)},p(w,H){if(H&2&&st(o.value)!==w[1].speed&&ct(o,w[1].speed),H&1&&r!==(r=w[0].length)&&c.value!==r&&(c.value=r),H&12&&st(m.value)!==w[2].cell&&ct(m,w[2].cell),H&8){K=w[3];let x;for(x=0;x<K.length;x+=1){let St=Lt(w,K,x);C[x]?C[x].p(St,H):(C[x]=Bt(St),C[x].c(),C[x].m(z,null))}for(;x<C.length;x+=1)C[x].d(1);C.length=K.length}H&12&&mt(z,w[2].part)},d(w){w&&b(e),rt(C,w),nt=!1,T(Et)}}}function Bt(t){let e,n=t[8]+"",i,o;return{c(){e=h("option"),i=S(n),e.__value=o=t[9],e.value=e.__value},m(u,s){v(u,e,s),_(e,i)},p:y,d(u){u&&b(e)}}}function de(t){let e;function n(u,s){return u[1].state==="play"?fe:ae}let i=n(t,-1),o=i(t);return{c(){e=h("nav"),o.c(),q(e,"playing",t[1].state==="play")},m(u,s){v(u,e,s),o.m(e,null)},p(u,[s]){i===(i=n(u,s))&&o?o.p(u,s):(o.d(1),o=i(u),o&&(o.c(),o.m(e,null))),s&2&&q(e,"playing",u[1].state==="play")},i:y,o:y,d(u){u&&b(e),o.d()}}}function _e(t,e,n){let i,o,u;O(t,p,a=>n(0,i=a)),O(t,$,a=>n(1,o=a)),O(t,A,a=>n(2,u=a));let s=[["full",1],["half",1.5],["quart",2]];function l(a){i.length<a.target.value?p.unshift({x:a.target.value-1,y:0}):p.pop()}function c(){o.speed=st(this.value),$.set(o)}function r(){u.cell=st(this.value),A.set(u),n(3,s)}function f(){u.part=Nt(this),A.set(u),n(3,s)}return[i,o,u,s,l,c,r,f]}var vt=class extends D{constructor(e){super(),L(this,e,_e,de,j,{})}},Pt=vt;function pe(t){let e,n,i;return{c(){e=h("span"),d(e,"data-x",n=t[0].x),d(e,"data-y",i=t[0].y),d(e,"class","pixel"),q(e,"fill",t[1].some(t[3])),q(e,"apple",U(t[0],t[2]))},m(o,u){v(o,e,u)},p(o,[u]){u&1&&n!==(n=o[0].x)&&d(e,"data-x",n),u&1&&i!==(i=o[0].y)&&d(e,"data-y",i),u&3&&q(e,"fill",o[1].some(o[3])),u&5&&q(e,"apple",U(o[0],o[2]))},i:y,o:y,d(o){o&&b(e)}}}function he(t,e,n){let i;O(t,V,l=>n(2,i=l));let{pixel:o}=e,{filled:u}=e,s=l=>U(l,o);return t.$$set=l=>{"pixel"in l&&n(0,o=l.pixel),"filled"in l&&n(1,u=l.filled)},[o,u,i,s]}var $t=class extends D{constructor(e){super(),L(this,e,he,pe,j,{pixel:0,filled:1})}},Ht=$t;function It(t,e,n){let i=t.slice();return i[5]=e[n],i[7]=n,i}function Gt(t,e,n){let i=t.slice();return i[5]=e[n],i[9]=n,i}function Wt(t){let e,n;return e=new Ht({props:{pixel:{x:t[9],y:t[7]},filled:[...t[1],t[2]]}}),{c(){tt(e.$$.fragment)},m(i,o){Y(e,i,o),n=!0},p(i,o){let u={};o&6&&(u.filled=[...i[1],i[2]]),e.$set(u)},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function Ut(t){let e,n,i={length:t[0].width},o=[];for(let s=0;s<i.length;s+=1)o[s]=Wt(Gt(t,i,s));let u=s=>R(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=ft()},m(s,l){for(let c=0;c<o.length;c+=1)o[c].m(s,l);v(s,e,l),n=!0},p(s,l){if(l&7){i={length:s[0].width};let c;for(c=0;c<i.length;c+=1){let r=Gt(s,i,c);o[c]?(o[c].p(r,l),M(o[c],1)):(o[c]=Wt(r),o[c].c(),M(o[c],1),o[c].m(e.parentNode,e))}for(yt(),c=i.length;c<o.length;c+=1)u(c);bt()}},i(s){if(!n){for(let l=0;l<i.length;l+=1)M(o[l]);n=!0}},o(s){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)R(o[l]);n=!1},d(s){rt(o,s),s&&b(e)}}}function me(t){let e,n,i,o,u,s={length:t[0].height},l=[];for(let r=0;r<s.length;r+=1)l[r]=Ut(It(t,s,r));let c=r=>R(l[r],1,1,()=>{l[r]=null});return{c(){e=h("section");for(let r=0;r<l.length;r+=1)l[r].c();d(e,"id","field"),B(e,"--cols",t[0].width),B(e,"--part",t[0].part),B(e,"--cell",t[0].cell+"px"),B(e,"--gap",t[0].gap+"px"),q(e,"full",t[0].part===1)},m(r,f){v(r,e,f);for(let a=0;a<l.length;a+=1)l[a].m(e,null);i=!0,o||(u=Dt(n=t[3].call(null,e)),o=!0)},p(r,[f]){if(f&7){s={length:r[0].height};let a;for(a=0;a<s.length;a+=1){let g=It(r,s,a);l[a]?(l[a].p(g,f),M(l[a],1)):(l[a]=Ut(g),l[a].c(),M(l[a],1),l[a].m(e,null))}for(yt(),a=s.length;a<l.length;a+=1)c(a);bt()}(!i||f&1)&&B(e,"--cols",r[0].width),(!i||f&1)&&B(e,"--part",r[0].part),(!i||f&1)&&B(e,"--cell",r[0].cell+"px"),(!i||f&1)&&B(e,"--gap",r[0].gap+"px"),(!i||f&1)&&q(e,"full",r[0].part===1)},i(r){if(!i){for(let f=0;f<s.length;f+=1)M(l[f]);i=!0}},o(r){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)R(l[f]);i=!1},d(r){r&&b(e),rt(l,r),o=!1,u()}}}function ge(t,e,n){let i,o,u,s;O(t,$,c=>n(4,i=c)),O(t,A,c=>n(0,o=c)),O(t,p,c=>n(1,u=c)),O(t,V,c=>n(2,s=c));function l(c){let r=new ResizeObserver(([{contentRect:g}])=>{let{width:m,height:E}=g,F=o.cell+o.gap;A.set({width:Math.round(m/F),height:Math.round(E/F),part:o.part,cell:o.cell,gap:o.gap})});r.observe(c),window.onkeydown=g=>f(g),c.onclick=g=>a(g);function f(g){if(i.state==="play")if(g.key.includes("Arrow")){let m=g.key.replace("Arrow","");p.direct(m)}else g.key.includes("Escape")&&(g.preventDefault(),$.pause())}function a(g){if(i.state!=="play")return;let{dataset:m}=g.target;if(Object.keys(m).length){let E=p.direction.x?"y":"x",F=Number(m[E])<p.head[E],nt=E==="x"?F?"Left":"Right":F?"Up":"Down";p.direct(nt)}}return{destroy(){r.disconnect()}}}return[o,u,s,l]}var Ft=class extends D{constructor(e){super(),L(this,e,ge,me,j,{})}},Vt=Ft;var Xt='<svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" fill="currentColor"/></svg>';function be(t){let e,n,i,o=t[0].score+"",u,s,l,c,r,f,a,g,m=t[0].speed+"",E;return{c(){e=h("header"),n=h("h3"),i=S("Score: "),u=S(o),s=N(),l=h("h1"),c=h("a"),r=S(`
        Snaky`),f=N(),a=h("h3"),g=S("Speed: "),E=S(m),d(c,"href","https://github.com/Valexr/Snaky"),d(c,"target","_blank"),d(c,"rel","noreferrer"),d(c,"id","gh"),d(e,"id","scoreboard")},m(F,P){v(F,e,P),_(e,n),_(n,i),_(n,u),_(e,s),_(e,l),_(l,c),c.innerHTML=Xt,_(l,r),_(e,f),_(e,a),_(a,g),_(a,E)},p(F,[P]){P&1&&o!==(o=F[0].score+"")&&lt(u,o),P&1&&m!==(m=F[0].speed+"")&&lt(E,m)},i:y,o:y,d(F){F&&b(e)}}}function we(t,e,n){let i;return O(t,$,o=>n(0,i=o)),[i]}var kt=class extends D{constructor(e){super(),L(this,e,we,be,j,{})}},Yt=kt;function ve(t){let e,n,i,o,u,s,l,c;return e=new Yt({}),o=new Vt({}),l=new Pt({}),{c(){tt(e.$$.fragment),n=N(),i=h("main"),tt(o.$$.fragment),u=N(),s=h("footer"),tt(l.$$.fragment)},m(r,f){Y(e,r,f),v(r,n,f),v(r,i,f),Y(o,i,null),v(r,u,f),v(r,s,f),Y(l,s,null),c=!0},p:y,i(r){c||(M(e.$$.fragment,r),M(o.$$.fragment,r),M(l.$$.fragment,r),c=!0)},o(r){R(e.$$.fragment,r),R(o.$$.fragment,r),R(l.$$.fragment,r),c=!1},d(r){W(e,r),r&&b(n),r&&b(i),W(o),r&&b(u),r&&b(s),W(l)}}}var xt=class extends D{constructor(e){super(),L(this,e,null,ve,j,{})}},Jt=xt;var $e=new Jt({target:document.body}),yn=$e;export{yn as default};
